<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Blackbox Prepaid Cards</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="./assets/favicon.ico" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>

  </head>

  <body class="bg-dark">


    <div class="container-fluid p-1 my-1" style="position: fixed;">
      <div class="clearfix">
        
        <div class="float-start">
          <a href="index.html"><img src="./assets/logo.png" alt="Logo" class="h-img" style="width: 3vw; height: 3vw;"></a>
        </div>
        <div class="float-end" id="connect-btn-section">
          <button class="rounded px-3 py-2" style="background-color:#97b0fc; z-index: 9999;" id="btn-connect-wallet"><strong>Connect Wallet</strong></button>
        </div>
        <div class="float-end d-none" id="connected-wallet-section">
          <strong><span class="p-2 rounded text-white" id="bbtt-balance" style="background-color:#97b0fc;"></span></strong>
          <strong><span class="rounded px-3 py-2" style="background-color:#919191; z-index: 9999;" id="connected-wallet-address"></span></strong>          
        </div>
      </div>
    </div>


    <div class="container-fluid bg-dark text-white">
      <div class="mx-auto mb-2" style="text-align:center;" id="header">
        <h2 class="text-capitalize pt-5"><small>Instant prepaid cards with crypto... no hassle</small></h2>
      </div>
      
      <div class="row p-2" id="main-content">
        <div class="col-sm-5 h-100 d-flex align-items-center justify-content-center" id="form-section">
          <div class="row p-2 m-2 border border-secondary rounded">
            
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="tab1" data-bs-toggle="tab" data-bs-target="#tab-content1" type="button" role="tab" aria-controls="tab-content1" aria-selected="true">Prepaid Card</button>
              </li>
              <!--
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab2" data-bs-toggle="tab" data-bs-target="#tab-content2" type="button" role="tab" aria-controls="tab-content2" aria-selected="false">Check Balance</button>
              </li>
              -->
            </ul>

            <div class="tab-content">
              <div class="tab-pane fade show active" id="tab-content1" role="tabpanel" aria-labelledby="tab1">
                
                <div class="row p-2 m-2" id="form-body" >
                  <form id="form-body">
                    <div class="mb-4">
                      <span class="form-label bg-dark" style="color:#ffffff;">Connect your wallet and choose from the options below to get started.</span>
                    </div>
                    <div class="mb-4">
                      <select name="sourceCurrency" id="sourceCurrency" class="form-select form-select bg-dark" style="color:#97b0fc;" aria-label="Select source currency" onchange="cardInputValidation()">
                        <option selected value="None" disabled>Select source currency</option>
                        <option value="ETH">ETH</option>
                        <option value="USDC" disabled>USDC</option>
                        <option value="USDT" disabled>USDT</option>
                        <option value="WBTC" disabled>WBTC</option>
                        <option value="PAXG" disabled>PAXG</option>
                      </select>
                    </div>
                    <div class="mb-4">
                      <select name="inputAmount" id="inputAmount" class="form-select form-select bg-dark" style="color:#97b0fc;" aria-label="Enter amount" onchange="cardInputValidation()">
                        <option selected value="NaN" disabled>Enter amount</option>
                        <option value="250">$250</option>
                        <option value="500">$500</option>
                        <option value="1000" disabled>$1000</option>
                        <option value="2500" disabled>$2000</option>
                      </select>
                    </div>
                    <div class="mb-2">
                      <select name="cardType" id="cardType" class="form-select form-select bg-dark" style="color:#97b0fc;" aria-label="Select card type" onchange="cardInputValidation()">
                        <option selected value="None" disabled>Select card type</option>
                        <option value="mastercard">Mastercard</option>
                        <option disabled value="visa">Visa</option>
                      </select>
                    </div>
                    <div class="row" style="color:#97b0fc;">
                      <div class="col mb-0">
                        <p>Fee in USDC :   <small class="feeValueUsd" id="feeValueUsd">-</small></p>                       
                      </div>
                      <div class="col mb-0">
                        <p><b>Total (ETH):   </b><b><small class="totalValue" id="totalValue">-</small></b></p>
                      </div>
                    </div>
                    <div class="d-grid">
                      <button class="btn btn-secondary transfer-funds" id="transferButton" disabled>Transfer</button>
                    </div>
                  </form>
                </div>


              </div>
              <!--
              <div class="tab-pane fade" id="tab-content2" role="tabpanel" aria-labelledby="tab2">
                <div class="mb-3">
                  <label for="card-balance-check" class="form-label bg-dark" style="color:#97b0fc;" >Enter your card number:</label>
                  <input type="text" class="form-control bg-dark text-white" id="card-balance-check" placeholder="Enter card number" name="card-number">                    
                </div>
                <div class="mb-2">
                  <select name="cardType" id="cardType" class="form-select form-select-md bg-dark" style="color:#97b0fc;" aria-label="Select card type" onchange="cardInputValidation()">
                    <option selected disabled>Select card type</option>
                    <option value="master">Mastercard</option>
                    <option disabled value="visa">Visa</option>
                  </select>
                </div>
                <div class="d-grid mt-4">
                  <button class="btn btn-secondary" id="getBalance-button" disabled>Check Card Balance</button>
                </div>
              </div>
              -->
            </div>


          </div>
          
        </div>
        
        <div class="col-sm-7 p-1 border rounded border-secondary border-alert d-flex align-items-center justify-content-center" id="card-info-section">

          <div class="row w-75 d-flex align-items-center justify-content-center" id="info-alert">
            <div class="alert alert-primary" style="z-index: 99;">
              <strong>Note! </strong>You need to have a minimum of 10,000 BBTT in your connected wallet to purchase the Prepaid Cards. Connect your wallet to get started.
            </div>
          </div>

          <div class="row w-75 d-flex align-items-center justify-content-center d-none" id="info-token-balance-low">            
            <div class="alert alert-danger" style="z-index: 99;">              
              <strong>Bad News! </strong>Your BBTT token balance in the connected wallet is insufficient to purchanse the Prepaid Card. You need to have at least 10,000 BBTT.
            </div>
          </div>

          <div class="row w-75 d-flex align-items-center justify-content-center d-none" id="info-token-balance-good">            
            <div class="alert alert-success" style="z-index: 99;">              
              <strong>Good News! </strong>Your token balance is sufficient to purchase the Prepaid Card.
            </div>
          </div>

          <div class="row w-75 d-flex align-items-center justify-content-center d-none" id="info-pay">            
            <div class="alert alert-success" style="z-index: 99;">              
              <strong>Availability Confirmed! </strong>Initiating payment process...
            </div>
          </div>

          <div class="row w-75 d-flex align-items-center justify-content-center d-none" id="info-error">            
            <div class="alert alert-danger" style="z-index: 99;">              
              <strong>Error! </strong>Sorry, we encountered an error processing your request. Please try again later. If the problem persists, please contact support for assistance.
            </div>
          </div>

          <div class="row w-75 d-flex align-items-center justify-content-center d-none" id="info-success">            
            <div class="alert alert-success" style="z-index: 99;">              
              <strong>In Process! </strong>Your card will be displayed after block confirmations. Please don't close or navigate out of the browser window.
            </div>
            
          </div>

          <div class="row w-75 h-100 d-flex align-items-center justify-content-center d-none" id="info-loading">           
            <div class="col-12 d-flex flex-column justify-content-center align-items-center">
              <div class="alert alert-warning" style="z-index: 99;">              
                <strong>In Process! </strong>Your card will be displayed after block confirmations. Please don't close or navigate out of this window.
              </div>
              <div class="alert alert-info" style="z-index: 99;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>Important! </strong>After your card is displayed, Print/copy your card details as this information will not be available afterwards.
              </div>
              <div class="scene">
                <div class="cube-wrapper">
                  <div class="cube">
                    <div class="cube-faces">
                      <div class="cube-face shadow"></div>
                      <div class="cube-face bottom"></div>
                      <div class="cube-face top"></div>
                      <div class="cube-face left"></div>
                      <div class="cube-face right"></div>
                      <div class="cube-face back"></div>
                      <div class="cube-face front"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          
          

          <div class="row d-flex align-items-center justify-content-center d-none" id="card-display">        
            
            <div class="row w-75 d-flex align-items-center justify-content-center" style="height:50vh; width:auto" id="card-img-container">
              <canvas class="scaled-canvas" id="card-canvas"></canvas>
            </div>
            
            <div class="row w-75 p-1 px-5 d-flex align-items-center justify-content-center" id="card-text-area">
              <div class="form-control p-3" id="editor" style="background-color: #343a40; color: #fff; border: none; resize: none; padding: 5px; font-size: 0.7rem; font-weight: 4rem;">
                <p class="text-cap" style="margin-bottom: 5px;"><span class="text-uppercase text-secondary">Name: </span><span id="card-holder-name" class="card-details"></span></p>
                <p class="text-cap" style="margin-bottom: 5px;"><span class="text-uppercase text-secondary">Card Number: </span><span id="card-number" class="card-details"></span></p>
                <p class="text-cap" style="margin-bottom: 5px;"><span class="text-uppercase text-secondary">Expiry Date: </span><span id="card-expiry" class="card-details"></span></p>
                <p class="text-cap" style="margin-bottom: 5px;"><span class="text-uppercase text-secondary">CVV: </span><span id="card-cvv" class="card-details"></span></p>
                <p class="text-cap" style="margin-bottom: 5px;"><span class="text-uppercase text-secondary">Address: </span><span id="card-address" class="card-details"></span></p>
                <p class="text-cap" style="margin-bottom: 5px;"><span class="text-uppercase text-secondary">Phone: </span><span id="card-phone" class="card-details"></span></p>
              </div>
            </div>
      
            <div class="row w-50 d-flex align-items-center justify-content-center" id="buttons-row">
              <div class="btn-group" role="group">
                <button class="btn btn-secondary btn-sm rounded-start" id="print-btn" style="background-color: #97b0fc; color:#000; font-size: 0.75rem;" data-bs-toggle="tooltip" title="Print card info">Print</button>
                <button class="btn btn-secondary btn-sm rounded-end" id="copy-btn" style="background-color: #97b0fc; color:#000; font-size: 0.75rem;" data-bs-toggle="tooltip" title="Copy card info">Copy Card Details</button>
                <span class="mt-2" id="message-copied" data-bs-toggle="tooltip" data-bs-original-title="Message-copied" style="color: #999;"></span>
              </div>
            </div>
      
          </div>
        </div>
      </div>


      <div class="row p-2 my-2 bg-secondary" id="footer">          
        <div class="form-footer" style="text-align: center;">
          <a href="https://twitter.com/BBTT_BlackBox" target="_blank">
            <img src="assets/twitter.png" alt="twitter">
          </a>
          <a href="https://www.dextools.io/app/en/ether/pair-explorer/0x92a8771C925ec0812325546075be51e76d2f7123" target="_blank">
            <img src="assets/dex.png" alt="dextools">
          </a>
          <a href="t.me/BBTT_PORTAL" target="_blank">
            <img src="assets/telegram.png" alt="telegram">
          </a>
          <a href="mailto:tokenblackbox@gmail.com" target="_blank">
            <img src="assets/mail.png" alt="email">
          </a>
        </div>          
      </div>

      <div class="mx-auto" style="text-align:center; color:#fff;">Copyright Â© Blackbox Token 2023</div>


    </div>

    

    <script>
      // Get the div and button elements
      const editor = document.getElementById('editor');
      const copyBtn = document.getElementById('copy-btn');
      const printBtn = document.getElementById('print-btn');
      const messageCopied = document.getElementById('message-copied');
    
      // Initialize the tooltips
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    
      copyBtn.addEventListener('click', () => {
        // Create a range and select the contents of the div element
        const range = document.createRange();
        range.selectNode(editor);
        window.getSelection().addRange(range);
        
        const tooltip = bootstrap.Tooltip.getInstance(copyBtn);
        tooltip.hide();

        // Copy the selected content to the clipboard
        document.execCommand('copy');
    
        // Clear the selection
        window.getSelection().removeAllRanges();
        
        // Show the message that the content has been copied
        messageCopied.setAttribute('data-bs-original-title', 'Copied');
    
        // Get the tooltip instance of messageCopied and show it
        const messageCopiedTooltip = bootstrap.Tooltip.getInstance(messageCopied);
        messageCopiedTooltip.show();
    
        setTimeout(() => {
          messageCopied.setAttribute('data-bs-original-title', '');
          messageCopiedTooltip.hide();
        }, 2000);
      });
    
      printBtn.addEventListener('click', () => {
        // Hide the print button tooltip
        const tooltip = bootstrap.Tooltip.getInstance(printBtn);
        tooltip.hide();
    
        // Print the contents of the div element
        window.print();
      });
    </script>
    <script>
      const loadFonts = async () => {
        try {
          const aldrich = new FontFace('Aldrich', 'url(/fonts/Aldrich-Regular.ttf)', {
            style: 'normal',
            weight: '400',
          });
          await aldrich.load();
          document.fonts.add(aldrich);
      
          const kredit = new FontFace('Kredit', 'url(/fonts/kredit.otf)', {
            style: 'normal',
            weight: '400',
          });
          await kredit.load();
          document.fonts.add(kredit);
        
            console.log('Fonts loaded successfully');
        } catch (error) {
          console.error('Error loading fonts', error);
        }
      };
    </script>
    
    


    <link href="prepaid.css" rel="stylesheet">
    <link href="loading.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.ethers.io/lib/ethers-5.4.umd.min.js"></script>
    
    <script src="config.js"></script>
    <script src="wallet-connect.js"></script>
    <script src="prepaid.js"></script>
    <script src="client.js"></script>
    
    
    
  </body>
</html>